<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>pyDFT Educational Workbench</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="background-orb"></div>
    <div class="background-grid"></div>

    <main class="layout">
      <section class="panel controls-panel">
        <header>
          <p class="kicker">Educational DFT</p>
          <h1>pyDFT Workbench</h1>
          <p class="lede">
            Solve simple atomic Kohn-Sham LDA systems and inspect energies, orbitals, and density profiles.
          </p>
        </header>

        <form id="scf-form" class="control-grid">
          <label>
            Preset system
            <select id="preset">
              <option value="H" data-atomic-number="1" data-electrons="1">H (Z=1, N=1)</option>
              <option value="He+" data-atomic-number="2" data-electrons="1">He+ (Z=2, N=1)</option>
              <option value="He" data-atomic-number="2" data-electrons="2">He (Z=2, N=2)</option>
              <option value="Li" data-atomic-number="3" data-electrons="3">Li (Z=3, N=3)</option>
              <option value="Be" data-atomic-number="4" data-electrons="4">Be (Z=4, N=4)</option>
              <option value="Ne" data-atomic-number="10" data-electrons="10">Ne (Z=10, N=10)</option>
            </select>
          </label>

          <label>
            Atomic number (Z)
            <input id="atomic-number" type="number" min="1" step="1" required />
          </label>

          <label>
            Electrons
            <input id="electrons" type="number" min="1" step="1" required />
          </label>

          <label>
            r max (a.u.)
            <input id="r-max" type="number" min="1" step="0.5" value="20" />
          </label>

          <label>
            Grid points
            <input id="num-points" type="number" min="100" step="50" value="1200" />
          </label>

          <label>
            Max SCF iterations
            <input id="max-iterations" type="number" min="1" step="1" value="200" />
          </label>

          <label>
            Mixing
            <input id="density-mixing" type="number" min="0.05" max="1" step="0.05" value="0.3" />
          </label>

          <label>
            Density tolerance
            <input
              id="density-tolerance"
              type="text"
              inputmode="decimal"
              value="1e-6"
              placeholder="e.g. 1e-6 or 0.001"
              required
            />
            <span class="field-hint">
              SCF stops when the density change is below this value.
              Typical values: 1e-4 (faster), 1e-6 (default), 1e-8 (stricter/slower).
            </span>
          </label>

          <label>
            l max
            <input id="l-max" type="number" min="0" max="3" step="1" value="1" />
          </label>

          <label>
            States per l
            <input id="states-per-l" type="number" min="1" max="10" step="1" value="4" />
          </label>

          <div class="toggle-row">
            <label><input id="use-hartree" type="checkbox" checked /> Hartree</label>
            <label><input id="use-exchange" type="checkbox" checked /> Exchange</label>
            <label><input id="use-correlation" type="checkbox" checked /> Correlation</label>
          </div>

          <button id="run-button" type="submit">Run SCF</button>
        </form>
      </section>

      <section class="panel results-panel">
        <div class="status-row">
          <h2>Results</h2>
          <span id="status-pill" class="status idle">Idle</span>
        </div>

        <div id="summary" class="summary-card">
          <p>No run yet.</p>
        </div>

        <div class="plot-card">
          <div class="plot-header">
            <h3>Radial Density Profile</h3>
            <label class="plot-toggle">
              <input id="log-density-scale" type="checkbox" checked />
              Log y-scale
            </label>
          </div>
          <canvas id="density-plot" width="900" height="280"></canvas>
        </div>

        <div class="orbital-card">
          <h3>Occupied Orbitals</h3>
          <table id="orbital-table">
            <thead>
              <tr>
                <th>n</th>
                <th>l</th>
                <th>Occ</th>
                <th>Energy (Ha)</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>

        <details>
          <summary>Raw JSON result</summary>
          <pre id="raw-json"></pre>
        </details>
      </section>
    </main>

    <script src="app.js"></script>
  </body>
</html>
